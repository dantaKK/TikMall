import{r as I,a1 as _e,a2 as me,a3 as Pe,a4 as je,a5 as qe,a6 as Ge,a7 as ze,a8 as Ae,a9 as Oe,m as F,a as V,aa as Ee,H as se,K as k,ab as Me,x as De,ac as Je,O as A,R as we,ad as te,P as L,$ as G,ae as ye,af as He,e as S,p as Y,n as Te,G as N,z as J,ag as Le,ah as Qe,Q as Se,ai as Ne,q as D,aj as ee,V as pe,U as ve,ak as he,L as xe,y as be,B as et,al as Ce,am as tt,J as Ye,s as at,an as nt,M as lt,k as it,v as ot,ao as st,ap as ct,aq as rt,W as ut,Y as Ie,ar as dt,as as ft,I as vt}from"./index-D4Vk8HQL.js";import{a as ae,u as Xe}from"./use-id-nfm9DGiW.js";import{T as ke,B as ht,a as gt,r as mt,H as bt}from"./index-EDWo_QzD.js";import{o as We,c as wt}from"./on-popup-reopen-B_-Li6TV.js";function yt(e,l){return e>l?"horizontal":l>e?"vertical":""}function Tt(){const e=I(0),l=I(0),r=I(0),n=I(0),o=I(0),t=I(0),i=I(""),s=I(!0),v=()=>i.value==="vertical",h=()=>i.value==="horizontal",c=()=>{r.value=0,n.value=0,o.value=0,t.value=0,i.value="",s.value=!0};return{move:y=>{const g=y.touches[0];r.value=(g.clientX<0?0:g.clientX)-e.value,n.value=g.clientY-l.value,o.value=Math.abs(r.value),t.value=Math.abs(n.value);const R=10;(!i.value||o.value<R&&t.value<R)&&(i.value=yt(o.value,t.value)),s.value&&(o.value>ke||t.value>ke)&&(s.value=!1)},start:y=>{c(),e.value=y.touches[0].clientX,l.value=y.touches[0].clientY},reset:c,startX:e,startY:l,deltaX:r,deltaY:n,offsetX:o,offsetY:t,direction:i,isVertical:v,isHorizontal:h,isTap:s}}function St(e,l,r){let n,o=0;const t=e.scrollLeft,i=r===0?1:Math.round(r*1e3/16);let s=t;function v(){_e(n)}function h(){s+=(l-t)/i,e.scrollLeft=s,++o<i&&(n=me(h))}return h(),v}function xt(e,l,r,n){let o,t=Pe(e);const i=t<l,s=r===0?1:Math.round(r*1e3/16),v=(l-t)/s;function h(){_e(o)}function c(){t+=v,(i&&t>l||!i&&t<l)&&(t=l),je(e,t),i&&t<l||!i&&t>l?o=me(c):o=me(n)}return c(),h}function Ct(){const e=I([]),l=[];return qe(()=>{e.value=[]}),[e,n=>(l[n]||(l[n]=o=>{e.value[n]=o}),l[n])]}function Fe(e,l){if(!Ge||!window.IntersectionObserver)return;const r=new IntersectionObserver(t=>{l(t[0].intersectionRatio>0)},{root:document.body}),n=()=>{e.value&&r.observe(e.value)},o=()=>{e.value&&r.unobserve(e.value)};ze(o),Ae(o),Oe(n)}const[It,kt]=F("sticky"),Rt={zIndex:Y,position:Te("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var $t=V({name:It,props:Rt,emits:["scroll","change"],setup(e,{emit:l,slots:r}){const n=I(),o=Ee(n),t=se({fixed:!1,width:0,height:0,transform:0}),i=I(!1),s=k(()=>Me(e.position==="top"?e.offsetTop:e.offsetBottom)),v=k(()=>{if(i.value)return;const{fixed:d,height:y,width:g}=t;if(d)return{width:`${g}px`,height:`${y}px`}}),h=k(()=>{if(!t.fixed||i.value)return;const d=De(Je(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${s.value}px`});return t.transform&&(d.transform=`translate3d(0, ${t.transform}px, 0)`),d}),c=d=>l("scroll",{scrollTop:d,isFixed:t.fixed}),b=()=>{if(!n.value||te(n))return;const{container:d,position:y}=e,g=G(n),R=Pe(window);if(t.width=g.width,t.height=g.height,y==="top")if(d){const m=G(d),O=m.bottom-s.value-t.height;t.fixed=s.value>g.top&&m.bottom>0,t.transform=O<0?O:0}else t.fixed=s.value>g.top;else{const{clientHeight:m}=document.documentElement;if(d){const O=G(d),T=m-O.top-s.value-t.height;t.fixed=m-s.value<g.bottom&&m>O.top,t.transform=T<0?-T:0}else t.fixed=m-s.value<g.bottom}c(R)};return A(()=>t.fixed,d=>l("change",d)),we("scroll",b,{target:o,passive:!0}),Fe(n,b),A([ye,He],()=>{!n.value||te(n)||!t.fixed||(i.value=!0,L(()=>{const d=G(n);t.width=d.width,t.height=d.height,i.value=!1}))}),()=>{var d;return S("div",{ref:n,style:v.value},[S("div",{class:kt({fixed:t.fixed&&!i.value}),style:h.value},[(d=r.default)==null?void 0:d.call(r)])])}}});const Bt=J($t),[Ve,ie]=F("swipe"),_t={loop:D,width:Y,height:Y,vertical:Boolean,autoplay:N(0),duration:N(500),touchable:D,lazyRender:Boolean,initialSwipe:N(0),indicatorColor:String,showIndicators:D,stopPropagation:D},Ke=Symbol(Ve);var Pt=V({name:Ve,props:_t,emits:["change","dragStart","dragEnd"],setup(e,{emit:l,slots:r}){const n=I(),o=I(),t=se({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let i=!1;const s=Tt(),{children:v,linkChildren:h}=Le(Ke),c=k(()=>v.length),b=k(()=>t[e.vertical?"height":"width"]),d=k(()=>e.vertical?s.deltaY.value:s.deltaX.value),y=k(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-b.value*c.value:0),g=k(()=>b.value?Math.ceil(Math.abs(y.value)/b.value):c.value),R=k(()=>c.value*b.value),m=k(()=>(t.active+c.value)%c.value),O=k(()=>{const u=e.vertical?"vertical":"horizontal";return s.direction.value===u}),T=k(()=>{const u={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(b.value){const x=e.vertical?"height":"width",C=e.vertical?"width":"height";u[x]=`${R.value}px`,u[C]=e[C]?`${e[C]}px`:""}return u}),K=u=>{const{active:x}=t;return u?e.loop?ve(x+u,-1,c.value):ve(x+u,0,g.value):x},Z=(u,x=0)=>{let C=u*b.value;e.loop||(C=Math.min(C,-y.value));let P=x-C;return e.loop||(P=ve(P,y.value,0)),P},B=({pace:u=0,offset:x=0,emitChange:C})=>{if(c.value<=1)return;const{active:P}=t,a=K(u),f=Z(a,x);if(e.loop){if(v[0]&&f!==y.value){const w=f<y.value;v[0].setOffset(w?R.value:0)}if(v[c.value-1]&&f!==0){const w=f>0;v[c.value-1].setOffset(w?-R.value:0)}}t.active=a,t.offset=f,C&&a!==P&&l("change",m.value)},H=()=>{t.swiping=!0,t.active<=-1?B({pace:c.value}):t.active>=c.value&&B({pace:-c.value})},X=()=>{H(),s.reset(),ee(()=>{t.swiping=!1,B({pace:-1,emitChange:!0})})},Q=()=>{H(),s.reset(),ee(()=>{t.swiping=!1,B({pace:1,emitChange:!0})})};let W;const _=()=>clearTimeout(W),U=()=>{_(),+e.autoplay>0&&c.value>1&&(W=setTimeout(()=>{Q(),U()},+e.autoplay))},E=(u=+e.initialSwipe)=>{if(!n.value)return;const x=()=>{var C,P;if(!te(n)){const a={width:n.value.offsetWidth,height:n.value.offsetHeight};t.rect=a,t.width=+((C=e.width)!=null?C:a.width),t.height=+((P=e.height)!=null?P:a.height)}c.value&&(u=Math.min(c.value-1,u),u===-1&&(u=c.value-1)),t.active=u,t.swiping=!0,t.offset=Z(u),v.forEach(a=>{a.setOffset(0)}),U()};te(n)?L().then(x):x()},j=()=>E(t.active);let p;const ce=u=>{!e.touchable||u.touches.length>1||(s.start(u),i=!1,p=Date.now(),_(),H())},re=u=>{e.touchable&&t.swiping&&(s.move(u),O.value&&(!e.loop&&(t.active===0&&d.value>0||t.active===c.value-1&&d.value<0)||(pe(u,e.stopPropagation),B({offset:d.value}),i||(l("dragStart",{index:m.value}),i=!0))))},ne=()=>{if(!e.touchable||!t.swiping)return;const u=Date.now()-p,x=d.value/u;if((Math.abs(x)>.25||Math.abs(d.value)>b.value/2)&&O.value){const P=e.vertical?s.offsetY.value:s.offsetX.value;let a=0;e.loop?a=P>0?d.value>0?-1:1:0:a=-Math[d.value>0?"ceil":"floor"](d.value/b.value),B({pace:a,emitChange:!0})}else d.value&&B({pace:0});i=!1,t.swiping=!1,l("dragEnd",{index:m.value}),U()},ue=(u,x={})=>{H(),s.reset(),ee(()=>{let C;e.loop&&u===c.value?C=t.active===0?0:u:C=u%c.value,x.immediate?ee(()=>{t.swiping=!1}):t.swiping=!1,B({pace:C-t.active,emitChange:!0})})},de=(u,x)=>{const C=x===m.value,P=C?{backgroundColor:e.indicatorColor}:void 0;return S("i",{style:P,class:ie("indicator",{active:C})},null)},fe=()=>{if(r.indicator)return r.indicator({active:m.value,total:c.value});if(e.showIndicators&&c.value>1)return S("div",{class:ie("indicators",{vertical:e.vertical})},[Array(c.value).fill("").map(de)])};return ae({prev:X,next:Q,state:t,resize:j,swipeTo:ue}),h({size:b,props:e,count:c,activeIndicator:m}),A(()=>e.initialSwipe,u=>E(+u)),A(c,()=>E(t.active)),A(()=>e.autoplay,U),A([ye,He,()=>e.width,()=>e.height],j),A(Qe(),u=>{u==="visible"?U():_()}),Se(E),Ne(()=>E(t.active)),We(()=>E(t.active)),ze(_),Ae(_),we("touchmove",re,{target:o}),()=>{var u;return S("div",{ref:n,class:ie()},[S("div",{ref:o,style:T.value,class:ie("track",{vertical:e.vertical}),onTouchstartPassive:ce,onTouchend:ne,onTouchcancel:ne},[(u=r.default)==null?void 0:u.call(r)]),fe()])}}});const zt=J(Pt),[At,Re]=F("tabs");var Ot=V({name:At,props:{count:he(Number),inited:Boolean,animated:Boolean,duration:he(Y),swipeable:Boolean,lazyRender:Boolean,currentIndex:he(Number)},emits:["change"],setup(e,{emit:l,slots:r}){const n=I(),o=s=>l("change",s),t=()=>{var s;const v=(s=r.default)==null?void 0:s.call(r);return e.animated||e.swipeable?S(zt,{ref:n,loop:!1,class:Re("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},{default:()=>[v]}):v},i=s=>{const v=n.value;v&&v.state.active!==s&&v.swipeTo(s,{immediate:!e.inited})};return A(()=>e.currentIndex,i),Se(()=>{i(e.currentIndex)}),ae({swipeRef:n}),()=>S("div",{class:Re("content",{animated:e.animated||e.swipeable})},[t()])}});const[Ze,oe]=F("tabs"),Et={type:Te("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:D,showHeader:D,lineWidth:Y,lineHeight:Y,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},Ue=Symbol(Ze);var Mt=V({name:Ze,props:Et,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:r}){let n,o,t,i,s;const v=I(),h=I(),c=I(),b=I(),d=Xe(),y=Ee(v),[g,R]=Ct(),{children:m,linkChildren:O}=Le(Ue),T=se({inited:!1,position:"",lineStyle:{},currentIndex:-1}),K=k(()=>m.length>+e.swipeThreshold||!e.ellipsis||e.shrink),Z=k(()=>({borderColor:e.color,background:e.background})),B=(a,f)=>{var w;return(w=a.name)!=null?w:f},H=k(()=>{const a=m[T.currentIndex];if(a)return B(a,T.currentIndex)}),X=k(()=>Me(e.offsetTop)),Q=k(()=>e.sticky?X.value+n:0),W=a=>{const f=h.value,w=g.value;if(!K.value||!f||!w||!w[T.currentIndex])return;const z=w[T.currentIndex].$el,$=z.offsetLeft-(f.offsetWidth-z.offsetWidth)/2;i&&i(),i=St(f,$,a?0:+e.duration)},_=()=>{const a=T.inited;L(()=>{const f=g.value;if(!f||!f[T.currentIndex]||e.type!=="line"||te(v.value))return;const w=f[T.currentIndex].$el,{lineWidth:z,lineHeight:$}=e,M=w.offsetLeft+w.offsetWidth/2,q={width:xe(z),backgroundColor:e.color,transform:`translateX(${M}px) translateX(-50%)`};if(a&&(q.transitionDuration=`${e.duration}s`),be($)){const le=xe($);q.height=le,q.borderRadius=le}T.lineStyle=q})},U=a=>{const f=a<T.currentIndex?-1:1;for(;a>=0&&a<m.length;){if(!m[a].disabled)return a;a+=f}},E=(a,f)=>{const w=U(a);if(!be(w))return;const z=m[w],$=B(z,w),M=T.currentIndex!==null;T.currentIndex!==w&&(T.currentIndex=w,f||W(),_()),$!==e.active&&(l("update:active",$),M&&l("change",$,z.title)),t&&!e.scrollspy&&et(Math.ceil(Ce(v.value)-X.value))},j=(a,f)=>{const w=m.find(($,M)=>B($,M)===a),z=w?m.indexOf(w):0;E(z,f)},p=(a=!1)=>{if(e.scrollspy){const f=m[T.currentIndex].$el;if(f&&y.value){const w=Ce(f,y.value)-Q.value;o=!0,s&&s(),s=xt(y.value,w,a?0:+e.duration,()=>{o=!1})}}},ce=(a,f,w)=>{const{title:z,disabled:$}=m[f],M=B(m[f],f);$||(wt(e.beforeChange,{args:[M],done:()=>{E(f),p()}}),gt(a)),l("clickTab",{name:M,title:z,event:w,disabled:$})},re=a=>{t=a.isFixed,l("scroll",a)},ne=a=>{L(()=>{j(a),p(!0)})},ue=()=>{for(let a=0;a<m.length;a++){const{top:f}=G(m[a].$el);if(f>Q.value)return a===0?0:a-1}return m.length-1},de=()=>{if(e.scrollspy&&!o){const a=ue();E(a)}},fe=()=>{if(e.type==="line"&&m.length)return S("div",{class:oe("line"),style:T.lineStyle},null)},u=()=>{var a,f,w;const{type:z,border:$,sticky:M}=e,q=[S("div",{ref:M?void 0:c,class:[oe("wrap"),{[ht]:z==="line"&&$}]},[S("div",{ref:h,role:"tablist",class:oe("nav",[z,{shrink:e.shrink,complete:K.value}]),style:Z.value,"aria-orientation":"horizontal"},[(a=r["nav-left"])==null?void 0:a.call(r),m.map(le=>le.renderTitle(ce)),fe(),(f=r["nav-right"])==null?void 0:f.call(r)])]),(w=r["nav-bottom"])==null?void 0:w.call(r)];return M?S("div",{ref:c},[q]):q},x=()=>{_(),L(()=>{var a,f;W(!0),(f=(a=b.value)==null?void 0:a.swipeRef.value)==null||f.resize()})};A(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],_),A(ye,x),A(()=>e.active,a=>{a!==H.value&&j(a)}),A(()=>m.length,()=>{T.inited&&(j(e.active),_(),L(()=>{W(!0)}))});const C=()=>{j(e.active,!0),L(()=>{T.inited=!0,c.value&&(n=G(c.value).height),W(!0)})},P=(a,f)=>l("rendered",a,f);return ae({resize:x,scrollTo:ne}),Ne(_),We(_),Oe(C),Fe(v,_),we("scroll",de,{target:y,passive:!0}),O({id:d,props:e,setLine:_,scrollable:K,onRendered:P,currentName:H,setTitleRefs:R,scrollIntoView:W}),()=>S("div",{ref:v,class:oe([e.type])},[e.showHeader?e.sticky?S(Bt,{container:v.value,offsetTop:X.value,onScroll:re},{default:()=>[u()]}):u():null,S(Ot,{ref:b,count:m.length,inited:T.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:T.currentIndex,onChange:E},{default:()=>{var a;return[(a=r.default)==null?void 0:a.call(r)]}})])}});const Dt=Symbol(),[Ht,$e]=F("tab"),Lt=V({name:Ht,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:Y,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:l}){const r=k(()=>{const o={},{type:t,color:i,disabled:s,isActive:v,activeColor:h,inactiveColor:c}=e;i&&t==="card"&&(o.borderColor=i,s||(v?o.backgroundColor=i:o.color=i));const d=v?h:c;return d&&(o.color=d),o}),n=()=>{const o=S("span",{class:$e("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||be(e.badge)&&e.badge!==""?S(tt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[o]}):o};return()=>S("div",{id:e.id,role:"tab",class:[$e([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:r.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[n()])}}),[Nt,Yt]=F("swipe-item");var Xt=V({name:Nt,setup(e,{slots:l}){let r;const n=se({offset:0,inited:!1,mounted:!1}),{parent:o,index:t}=Ye(Ke);if(!o)return;const i=k(()=>{const h={},{vertical:c}=o.props;return o.size.value&&(h[c?"height":"width"]=`${o.size.value}px`),n.offset&&(h.transform=`translate${c?"Y":"X"}(${n.offset}px)`),h}),s=k(()=>{const{loop:h,lazyRender:c}=o.props;if(!c||r)return!0;if(!n.mounted)return!1;const b=o.activeIndicator.value,d=o.count.value-1,y=b===0&&h?d:b-1,g=b===d&&h?0:b+1;return r=t.value===b||t.value===y||t.value===g,r}),v=h=>{n.offset=h};return Se(()=>{L(()=>{n.mounted=!0})}),ae({setOffset:v}),()=>{var h;return S("div",{class:Yt(),style:i.value},[s.value?(h=l.default)==null?void 0:h.call(l):null])}}});const Wt=J(Xt),[Ft,ge]=F("tab"),Vt=De({},mt,{dot:Boolean,name:Y,badge:Y,title:String,disabled:Boolean,titleClass:at,titleStyle:[String,Object],showZeroBadge:D});var Kt=V({name:Ft,props:Vt,setup(e,{slots:l}){const r=Xe(),n=I(!1),o=dt(),{parent:t,index:i}=Ye(Ue);if(!t)return;const s=()=>{var g;return(g=e.name)!=null?g:i.value},v=()=>{n.value=!0,t.props.lazyRender&&L(()=>{t.onRendered(s(),e.title)})},h=k(()=>{const g=s()===t.currentName.value;return g&&!n.value&&v(),g}),c=I(""),b=I("");nt(()=>{const{titleClass:g,titleStyle:R}=e;c.value=g?st(g):"",b.value=R&&typeof R!="string"?ct(rt(R)):R});const d=g=>S(Lt,ut({key:r,id:`${t.id}-${i.value}`,ref:t.setTitleRefs(i.value),style:b.value,class:c.value,isActive:h.value,controls:r,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:R=>g(o.proxy,i.value,R)},Ie(t.props,["type","color","shrink"]),Ie(e,["dot","badge","title","disabled","showZeroBadge"])),{title:l.title}),y=I(!h.value);return A(h,g=>{g?y.value=!1:ee(()=>{y.value=!0})}),A(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),lt(Dt,h),ae({id:r,renderTitle:d}),()=>{var g;const R=`${t.id}-${i.value}`,{animated:m,swipeable:O,scrollspy:T,lazyRender:K}=t.props;if(!l.default&&!m)return;const Z=T||h.value;if(m||O)return S(Wt,{id:r,role:"tabpanel",class:ge("panel-wrapper",{inactive:y.value}),tabindex:h.value?0:-1,"aria-hidden":!h.value,"aria-labelledby":R,"data-allow-mismatch":"attribute"},{default:()=>{var X;return[S("div",{class:ge("panel")},[(X=l.default)==null?void 0:X.call(l)])]}});const H=n.value||T||!K?(g=l.default)==null?void 0:g.call(l):null;return it(S("div",{id:r,role:"tabpanel",class:ge("panel"),tabindex:Z?0:-1,"aria-labelledby":R,"data-allow-mismatch":"attribute"},[H]),[[ot,Z]])}}});const pt=J(Kt),ea=J(Mt),[Zt,Be]=F("tag"),Ut={size:String,mark:Boolean,show:D,type:Te("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var jt=V({name:Zt,props:Ut,emits:["close"],setup(e,{slots:l,emit:r}){const n=i=>{i.stopPropagation(),r("close",i)},o=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},t=()=>{var i;const{type:s,mark:v,plain:h,round:c,size:b,closeable:d}=e,y={mark:v,plain:h,round:c};b&&(y[b]=b);const g=d&&S(vt,{name:"cross",class:[Be("close"),bt],onClick:n},null);return S("span",{style:o(),class:Be([y,s])},[(i=l.default)==null?void 0:i.call(l),g])};return()=>S(ft,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?t():null]})}});const ta=J(jt);export{zt as S,ta as T,ea as a,pt as b,Wt as c,Tt as u};
