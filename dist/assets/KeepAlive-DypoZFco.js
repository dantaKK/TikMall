import{B as H,r as j,u as D}from"./index-EDWo_QzD.js";import{r as y,Q as z,P as A,O as W,ae as q,af as F,$ as G,e as n,m as R,a as x,ag as J,q as T,p as C,G as Q,ac as U,z as V,x as Y,ar as Z,J as L,K as $,am as S,W as X,E as ee,I as O,ay as ae,o as g,i as w,w as r,b as p,ao as b,_ as te,c as oe,az as ne,aA as ce,l as se,aB as le}from"./index-D4Vk8HQL.js";import{o as re,c as ie}from"./on-popup-reopen-B_-Li6TV.js";const ue=(e,t)=>{const a=y(),o=()=>{a.value=G(e).height};return z(()=>{A(o);for(let c=1;c<=3;c++)setTimeout(o,100*c)}),re(()=>A(o)),W([q,F],o),a};function de(e,t){const a=ue(e);return o=>n("div",{class:t("placeholder"),style:{height:a.value?`${a.value}px`:void 0}},[o()])}const[E,k]=R("tabbar"),fe={route:Boolean,fixed:T,border:T,zIndex:C,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:Q(0),safeAreaInsetBottom:{type:Boolean,default:null}},K=Symbol(E);var me=x({name:E,props:fe,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const o=y(),{linkChildren:c}=J(K),s=de(o,k),f=()=>{var u;return(u=e.safeAreaInsetBottom)!=null?u:e.fixed},i=()=>{var u;const{fixed:d,zIndex:m,border:h}=e;return n("div",{ref:o,role:"tablist",style:U(m),class:[k({fixed:d}),{[H]:h,"van-safe-area-bottom":f()}]},[(u=a.default)==null?void 0:u.call(a)])};return c({props:e,setActive:(u,d)=>{ie(e.beforeChange,{args:[u],done(){t("update:modelValue",u),t("change",u),d()}})}}),()=>e.fixed&&e.placeholder?s(i):i()}});const ve=V(me),[he,B]=R("tabbar-item"),_e=Y({},j,{dot:Boolean,icon:String,name:C,badge:C,badgeProps:Object,iconPrefix:String});var pe=x({name:he,props:_e,emits:["click"],setup(e,{emit:t,slots:a}){const o=D(),c=Z().proxy,{parent:s,index:f}=L(K);if(!s)return;const i=$(()=>{var d;const{route:m,modelValue:h}=s.props;if(m&&"$route"in c){const{$route:P}=c,{to:_}=e,v=ee(_)?_:{path:_};return!!P.matched.find(I=>{const M="path"in v&&v.path===I.path,N="name"in v&&v.name===I.name;return M||N})}return((d=e.name)!=null?d:f.value)===h}),l=d=>{var m;i.value||s.setActive((m=e.name)!=null?m:f.value,o),t("click",d)},u=()=>{if(a.icon)return a.icon({active:i.value});if(e.icon)return n(O,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var d;const{dot:m,badge:h}=e,{activeColor:P,inactiveColor:_}=s.props,v=i.value?P:_;return n("div",{role:"tab",class:B({active:i.value}),style:{color:v},tabindex:0,"aria-selected":i.value,onClick:l},[n(S,X({dot:m,class:B("icon"),content:h},e.badgeProps),{default:u}),n("div",{class:B("text")},[(d=a.default)==null?void 0:d.call(a,{active:i.value})])])}}});const be=V(pe),ge=x({__name:"TabBar",setup(e){const t=y(0);return z(()=>{const a=ae();console.log(a.fullPath),a.fullPath=="/home"?t.value=0:a.fullPath=="/assistant"?t.value=1:a.fullPath=="/information"?t.value=2:a.fullPath=="/my"&&(t.value=3)}),(a,o)=>{const c=O,s=be,f=S,i=ve;return g(),w(i,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l),class:"shadow-lg border-t border-gray-200 bg-white opacity-95","active-color":"#ff4c4c","inactive-color":"#666666"},{default:r(()=>[n(s,{to:"/home"},{icon:r(l=>[n(c,{class:"iconfont","class-prefix":"icon",name:"shouye",color:l.active?"#ff4c4c":"#666",size:"22"},null,8,["color"])]),default:r(()=>[p("span",{class:b({"font-medium":t.value===0})},"商城",2)]),_:1}),n(s,{to:"/assistant"},{icon:r(l=>[n(c,{class:"iconfont","class-prefix":"icon",name:"zhihuicaigou",color:l.active?"#ff4c4c":"#666",size:"22"},null,8,["color"])]),default:r(()=>[p("span",{class:b({"font-medium":t.value===1})},"助手",2)]),_:1}),n(s,{to:"/information"},{icon:r(l=>[n(c,{name:"chat-o",color:l.active?"#ff4c4c":"#666",size:"22"},null,8,["color"])]),badge:r(()=>[n(f,{content:78,offset:[-4,-6],color:"#ff4c4c"})]),default:r(()=>[p("span",{class:b({"font-medium":t.value===2})},"消息",2)]),_:1}),n(s,{to:"/my"},{icon:r(l=>[n(c,{class:"iconfont","class-prefix":"icon",name:"wode",color:l.active?"#ff4c4c":"#666",size:"22"},null,8,["color"])]),badge:r(()=>[n(f,{dot:"",offset:[-4,-6],color:"#ff4c4c"})]),default:r(()=>[p("span",{class:b({"font-medium":t.value===3})},"我的",2)]),_:1})]),_:1},8,["modelValue"])}}}),xe=te(ge,[["__scopeId","data-v-21e40e83"]]),Pe={class:"footer h-12"},ye=x({__name:"KeepAlive",setup(e){const t=ne(),a=$(()=>t.getRoutes().filter(o=>o.meta.cache).map(o=>o.name));return(o,c)=>{const s=ce("router-view");return g(),oe("div",null,[n(s,null,{default:r(({Component:f})=>[(g(),w(le,{include:a.value},[(g(),w(se(f)))],1032,["include"]))]),_:1}),p("div",Pe,[n(xe,{class:"fixed bottom-0"})])])}}});export{ye as default};
